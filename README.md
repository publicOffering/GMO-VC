# まとめ
結局GMOから許可が出なかったので、このスタックは取りやめ。コインチェックに移行。
このスタックを実行する場合は、template.ymlのパスに行き、
sam build -t template.yml
を実行すればよい。

# GMO-VC

実装方法の根拠
# Sam採用理由
CloudFormationやterraformと迷ったが、Lambdaのソースコードの管理がそれらだとzipに固めるみたいなステップが必要で、samで直接Lambdaを見る記載をした方がシンプルかと思い、samにした。

それに伴い、Lambdaパートと他のリソース(IAMやDynamo、API、EventBrdige)を別にしようとしたがとりあえずはまとめて1つのテンプレにしてみることにした。

# Templateをjson(udemyのサンプル)からyamlにした理由
ネット上のサンプルがみんなyamlだから.
SAMのgithubにDevopsのサイクルも書かれていた↓
https://github.com/aws/serverless-application-model

# データストアの方針
1.DynamoDB
レート情報など更新や参照、挿入を色々する。メインのデータストア。

2.パラメータストア
秘匿情報を入れる。基本更新はマニュアルとし、PGMからは参照しかしない。(LINEチャネル分けることになったら例外あるかも)

3.環境変数
ほとんど使用しない。SAMでリソース作成したときに作成時からしか参照できないものに限る。

4.common_func.py
思いつきで作ったが、環境変数との使い分け微妙。何かに統一したい。環境変数かもしれない。

# メニュー
1.日次レート確認（現物のみ。上昇閾値、下降閾値も表示)

2.口座情報確認

3.上昇閾値修正

4.下降閾値修正

5.手動買い

6.手動売り

# Push
1.騰貴閾値越え通知

2.下落閾値越え通知

3.自動買い成立

4.自動売り成立

# 実装すること
済 IAM整備(DynamoDBの権限をテンプレで表現)

済 リッチメニュー化

各機能の実装

全体をパイプライン化


# 売り買いアルゴリズム
# イナゴ方式
買い…3回前のレート(5分間隔)から3%伸びていたら高騰してると判断して、即買い。ただし、すでにその仮想通貨を持っていたら追加購入しない。
BTC_BUYING_RATEみたいな項目作って買値を入れる。

売り…買値から 2 %増加したら即売り。
BTC_BUYING_RATEみたいな項目の買値を0にする。
